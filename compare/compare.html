<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Comparateur Stratégies - Produits Structurés & Options</title>
    <link rel="stylesheet" href="../style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/katex@0.16.9/dist/katex.min.css">
</head>
<body class="themed-body compare-page">
    <header class="header compare-header">
        <div class="header-content">
            <div class="logo">
                <svg width="32" height="32" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <polyline points="22 12 18 12 15 21 9 3 6 12 2 12"></polyline>
                </svg>
                <div>
                    <h1 id="header-title">Comparison Lab</h1>
                    <p id="header-tagline"></p>
                </div>
            </div>
            <nav class="nav-links" aria-label="Navigation principale">
                <a href="../index.html" class="nav-link" id="nav-home">Accueil</a>
                <a href="../structu/structured.html" class="nav-link" id="nav-structured">Structurés</a>
                <a href="../options/options.html" class="nav-link" id="nav-options">Options</a>
                <a href="compare.html" class="nav-link active" aria-current="page" id="nav-compare">Comparateur</a>
                <a href="../quiz/quiz.html" class="nav-link" id="nav-quiz">Quiz</a>
            </nav>
            <button class="lang-toggle" id="lang-toggle" aria-label="Changer de langue">
                <span id="lang-text">FR</span>
            </button>
        </div>
    </header>

    <main>
        <section class="compare-hero" id="comparison-hero">
            <h1 id="compare-hero-title">Comparateur Stratégies Structurées & Options</h1>
            <p id="compare-hero-description">Analysez instantanément deux stratégies, visualisez leurs payoffs, comparez leurs métriques clés et découvrez des recommandations adaptées.</p>
        </section>

        <div class="tab-navigation" role="tablist" aria-label="Sections comparateur">
            <button class="tab-button" role="tab" aria-selected="true" aria-controls="tab-comparison" id="tab-comparison-button">
                <span id="tab-comparison-label">Comparaison</span>
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M3 3h7v7H3z"></path>
                    <path d="M14 14h7v7h-7z"></path>
                    <path d="M14 3h7v7h-7z"></path>
                    <path d="M3 14h7v7H3z"></path>
                </svg>
            </button>
            <button class="tab-button" role="tab" aria-selected="false" aria-controls="tab-recommendations" id="tab-recommendations-button">
                <span id="tab-recommendations-label">Recommandations</span>
                <svg width="22" height="22" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <path d="M12 2l3 7h7l-5.6 4.1L18 21l-6-4-6 4 1.6-7.9L2 9h7z"></path>
                </svg>
            </button>
        </div>

        <section id="tab-comparison" class="tab-panel active" role="tabpanel" aria-labelledby="tab-comparison-button">
            <div class="comparison-grid">
                <article class="comparison-card" id="strategy-1-card">
                    <header>
                        <h3 id="strategy-1-title">Stratégie 1</h3>
                        <span class="meta-chip" id="strategy-1-type">Structuré</span>
                    </header>
                    <label for="strategy-select-1" class="sr-only">Choisissez la stratégie structurée à comparer</label>
                    <select id="strategy-select-1" class="strategy-select" aria-label="Stratégie structurée">
                    </select>
                    <div class="strategy-meta" aria-live="polite" id="strategy-1-meta"></div>
                    <button class="details-button" data-strategy-role="first" aria-haspopup="dialog" id="details-button-1">Voir les détails</button>
                </article>

                <article class="comparison-card" id="strategy-2-card">
                    <header>
                        <h3 id="strategy-2-title">Stratégie 2</h3>
                        <span class="meta-chip" id="strategy-2-type">Options</span>
                    </header>
                    <label for="strategy-select-2" class="sr-only">Choisissez la stratégie optionnelle à comparer</label>
                    <select id="strategy-select-2" class="strategy-select" aria-label="Stratégie optionnelle">
                    </select>
                    <div class="strategy-meta" aria-live="polite" id="strategy-2-meta"></div>
                    <button class="details-button" data-strategy-role="second" aria-haspopup="dialog" id="details-button-2">Voir les détails</button>
                </article>
            </div>

            <div class="chart-card" aria-live="polite">
                <div class="chart-status visible" id="chart-loading">Chargement du graphique...</div>
                <canvas id="comparisonChart" role="img" aria-label="Comparaison des payoffs"></canvas>
            </div>

            <div class="table-wrapper" id="comparison">
                <table class="comparison-table" aria-describedby="table-caption">
                    <caption id="table-caption" class="sr-only">Tableau comparatif des métriques clés</caption>
                    <thead>
                        <tr>
                            <th scope="col" id="table-metric-label">Métrique</th>
                            <th scope="col" id="strategy-1-label">Stratégie 1</th>
                            <th scope="col" id="strategy-2-label">Stratégie 2</th>
                        </tr>
                    </thead>
                    <tbody id="comparison-table-body">
                    </tbody>
                </table>
            </div>
        </section>

        <section id="tab-recommendations" class="tab-panel" role="tabpanel" aria-labelledby="tab-recommendations-button">
            <div class="recommendations-grid" id="recommendations-grid" aria-live="polite">
            </div>
        </section>

    </main>

    <footer class="compare-footer">
        <p id="footer-disclaimer">Informations fournies à titre pédagogique.</p>
        <p id="footer-copyright">© 2025 REDA SALHI - Tous droits réservés.</p>
    </footer>

    <div class="modal" id="strategy-modal" role="dialog" aria-modal="true" aria-labelledby="modal-title">
        <div class="modal-content">
            <button class="modal-close" id="modal-close" aria-label="Fermer la fenêtre">
                <svg width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" aria-hidden="true">
                    <line x1="18" y1="6" x2="6" y2="18"></line>
                    <line x1="6" y1="6" x2="18" y2="18"></line>
                </svg>
            </button>
            <h2 id="modal-title">Détails de la stratégie</h2>
            <p id="modal-description"></p>
            <div id="modal-points"></div>
        </div>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-annotation@3.0.1/dist/chartjs-plugin-annotation.min.js"></script>
    <script src="compare.js"></script>
</body>
</html>
